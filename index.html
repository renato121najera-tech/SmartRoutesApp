index.html
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Routes — Guadalajara</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root {
      --accent:#0f172a;
      --bg:#f8fafc;
      --muted:#6b7280;
    }
    body,html { margin:0; height:100%; font-family:Inter,Arial; background:var(--bg); }
    .app { display:flex; flex-direction:column; height:100vh; }
    header { background:white; padding:12px 16px; display:flex; align-items:center; box-shadow:0 1px 4px rgba(15,23,42,0.1); }
    header h1 { margin:0; font-size:1.2rem; color:var(--accent); }
    .container { display:flex; flex:1; min-height:0; }
    aside { width:320px; padding:14px; background:white; border-right:1px solid #e6edf3; overflow:auto; }
    main { flex:1; }
    #map { height:100%; }
    label { display:block; font-size:0.85rem; color:var(--muted); margin-top:10px; }
    input { width:100%; padding:8px; border:1px solid #e6edf3; border-radius:8px; }
    .btn { background:var(--accent); color:white; border:none; padding:9px 12px; border-radius:8px; margin-top:10px; cursor:pointer; font-weight:600; }
    .suggestions { background:white; border:1px solid #e6edf3; border-radius:8px; margin-top:4px; position:absolute; z-index:1000; width:calc(100% - 28px); box-shadow:0 2px 6px rgba(0,0,0,0.05); }
    .suggestions div { padding:8px; cursor:pointer; }
    .suggestions div:hover { background:#f1f5f9; }
    .status { margin-top:12px; color:var(--muted); font-size:0.9rem; }
  </style>
</head>
<body>
  <div class="app">
    <header><h1>Smart Routes</h1></header>
    <div class="container">
      <aside>
        <label>Origen</label>
        <div style="position:relative">
          <input id="origin" type="text" placeholder="Ej: CUCEA, Universidad" autocomplete="off"/>
          <div id="originList" class="suggestions" style="display:none;"></div>
        </div>

        <label>Destino</label>
        <div style="position:relative">
          <input id="destination" type="text" placeholder="Ej: Plaza del Sol" autocomplete="off"/>
          <div id="destList" class="suggestions" style="display:none;"></div>
        </div>

        <button id="findBtn" class="btn">Buscar ruta</button>
        <div class="status" id="status">Estado: listo</div>
      </aside>

      <main><div id="map"></div></main>
    </div>
  </div>

<script>
  const GUADALAJARA = { lat: 20.6736, lng: -103.344 };
  const map = L.map('map').setView([GUADALAJARA.lat, GUADALAJARA.lng], 13);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom:19,
    attribution:'© OpenStreetMap'
  }).addTo(map);

  let routeLayer, origin, dest;

  const el = id => document.getElementById(id);
  const originInput = el('origin'), destInput = el('destination');
  const originList = el('originList'), destList = el('destList');
  const statusEl = el('status');

  function setStatus(t){ statusEl.textContent = 'Estado: ' + t; }

  async function fetchSuggestions(q, listEl){
    if (q.length < 3) { listEl.style.display='none'; return; }
    const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q+', Guadalajara, Mexico')}&addressdetails=1&limit=5`;
    const resp = await fetch(url, { headers:{'Accept-Language':'es'} });
    const data = await resp.json();
    listEl.innerHTML = '';
    data.forEach(place => {
      const div = document.createElement('div');
      div.textContent = place.display_name;
      div.onclick = () => {
        listEl.style.display='none';
        if (listEl===originList){ 
          originInput.value = place.display_name; 
          origin = {lat:parseFloat(place.lat), lon:parseFloat(place.lon)};
        } else {
          destInput.value = place.display_name; 
          dest = {lat:parseFloat(place.lat), lon:parseFloat(place.lon)};
        }
      };
      listEl.appendChild(div);
    });
    listEl.style.display = data.length ? 'block' : 'none';
  }

  originInput.addEventListener('input', ()=>fetchSuggestions(originInput.value, originList));
  destInput.addEventListener('input', ()=>fetchSuggestions(destInput.value, destList));

  async function getRoute(a,b){
    const coords = `${a.lon},${a.lat};${b.lon},${b.lat}`;
    const url = `https://router.project-osrm.org/route/v1/driving/${coords}?overview=full&geometries=geojson`;
    const r = await fetch(url);
    const j = await r.json();
    return j.routes[0];
  }

  el('findBtn').addEventListener('click', async ()=>{
    if(!origin || !dest){ setStatus('Selecciona origen y destino'); return; }
    setStatus('Calculando ruta...');
    const route = await getRoute(origin,dest);
    if(routeLayer) routeLayer.remove();
    routeLayer = L.geoJSON(route.geometry,{style:{color:'#2563eb',weight:6}}).addTo(map);
    map.fitBounds(routeLayer.getBounds().pad(0.2));
    const km = (route.distance/1000).toFixed(2);
    const min = Math.round(route.duration/60);
    setStatus(`Ruta lista: ${km} km · ${min} min aprox.`);
  });
</script>
</body>
</html>




